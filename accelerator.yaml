accelerator:
  displayName: ML Platform Starter
  description: Wizard for configuring the components of an MLOps platform on TAP. Here, you can autogenerate the configuration that you need for one or more platforms that are essential for your ML environment. Use it to build Data Sources platforms, Data Preprocessing platforms, ML Training platforms, ML Governance platforms, ML Observability platforms, ML Deployment & Serving platforms, and ML Notebook & Experimentation platforms.
  iconUrl: https://cdn-icons-png.flaticon.com/512/7364/7364323.png
  tags:
    - "ML"
    - "AI"
    - "machinelearning"
    - "datascience"
    - "MLOps"
    - "artificialintelligence"
    - "pipeline"
    - "GitOps"
    - "platform"
  options:
    - name: mlPlatformType
      inputType: select
      label: Type of ML Platform
      choices:
        - value: "none"
          text: "--Select a platform--"
        - value: "datasource"
          text: Data Sources
        - value: "dataprocess"
          text: Data Preprocessing
        - value: "training"
          text: ML Training
        - value: "governance"
          text: ML Governance
        - value: "observability"
          text: ML Observability
        - value: "serving"
          text: ML Deployment and Serving
        - value: "notebook"
          text: ML Notebook and Experimentation
      defaultValue: "none"
      required: true


    - name: postgres
      inputType: radio
      display: true
      choices:
        - text: 'postgres (Data Sources / Data Preprocessing)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: datasource
    - name: postgresAuthUsername
      inputType: text
      display: true
      label: 'postgresAuth.username'
      defaultValue: 'pgadmin'
      dependsOn:
        name: postgres
        value: selected
    - name: postgresAuthPassword
      inputType: text
      display: true
      label: 'postgresAuth.password'
      defaultValue: 'changeme'
      dependsOn:
        name: postgres
        value: selected


    - name: airflow
      inputType: radio
      display: true
      choices:
        - text: 'airflow (Data Preprocessing / ML Training)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: dataprocess
    - name: airflowAuthUsername
      inputType: text
      display: true
      label: 'airflowAuth.username'
      defaultValue: 'admin'
      dependsOn:
        name: airflow
        value: selected
    - name: airflowAuthPassword
      inputType: text
      display: true
      label: 'airflowAuth.password'
      defaultValue: 'admin'
      dependsOn:
        name: airflow
        value: selected


    - name: mlflow
      inputType: radio
      display: true
      choices:
        - text: 'MLflow (ML Training)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlflowAuthUsername
      inputType: text
      display: true
      label: 'mlflowAuth.username'
      defaultValue: 'admin'
      dependsOn:
        name: mlflow
        value: selected
    - name: mlflowAuthPassword
      inputType: text
      display: true
      label: 'mlflowAuth.password'
      defaultValue: 'admin'
      dependsOn:
        name: mlflow
        value: selected


    - name: datahub
      inputType: radio
      display: true
      choices:
        - text: 'datahub (Data / ML Governance)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: governance
    - name: datahubAuthUsername
      inputType: text
      display: true
      label: 'datahubAuth.username'
      defaultValue: 'admin'
      dependsOn:
        name: datahub
        value: selected
    - name: datahubAuthPassword
      inputType: text
      display: true
      label: 'datahubAuth.password'
      defaultValue: 'admin'
      dependsOn:
        name: datahub
        value: selected


    - name: evidently
      inputType: radio
      display: true
      choices:
        - text: 'evidently (ML Monitoring & Observability)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: observability
    - name: evidentlyAuthUsername
      inputType: text
      display: true
      label: 'evidentlyAuth.username'
      defaultValue: 'admin'
      dependsOn:
        name: evidently
        value: selected
    - name: evidentlyAuthPassword
      inputType: text
      display: true
      label: 'evidentlyAuth.password'
      defaultValue: 'admin'
      dependsOn:
        name: evidently
        value: selected


    - name: argocd
      inputType: radio
      display: true
      choices:
        - text: 'Argo CD (ML / App Deployment)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: serving
    - name: argocdAuthUsername
      inputType: text
      display: true
      label: 'argocdAuth.username'
      defaultValue: 'admin'
      dependsOn:
        name: argocd
        value: selected
    - name: argocdAuthPassword
      inputType: text
      display: true
      label: 'argocdAuth.password'
      defaultValue: 'admin'
      dependsOn:
        name: argocd
        value: selected

    - name: jupyter
      inputType: radio
      display: true
      choices:
        - text: 'jupyter (ML Notebooks & Experimentation)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: notebook

    - name: jupyterAuthUsername
      inputType: text
      display: true
      label: 'jupyterAuth.username'
      defaultValue: 'admin'
      dependsOn:
        name: jupyter
        value: selected
    - name: jupyterAuthPassword
      inputType: text
      display: true
      label: 'jupyterAuth.password'
      defaultValue: 'admin'
      dependsOn:
        name: jupyter
        value: selected

#  imports:
#    - name: airflow-fragment
#      expose:
#        - name: "mlPlatformType"
#          as: "airflowMlPlatformType"
#          dependsOn:
#            name: mlPlatformType
#            value: hidden
#        - name: "*"
#          dependsOn:
#            name: mlPlatformType
#            value: dataprocess
#      exposeTypes:
#        - name: "*"

engine:
  type: Merge
  sources:
    - type: Chain
      transformations:
        - type: Include
          patterns: [ 'resources/values-overrides.yaml' ]
